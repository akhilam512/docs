---
title: 'Krisp noise cancellation'
description: 'Learn how to integrate Krisp noise cancellation into your Pipecat application'
---

## Overview

This guide will walk you through setting up and using Krisp's noise reduction capabilities in your Pipecat application. Krisp provides professional-grade noise cancellation that can significantly improve audio quality in real-time communications.

To use Krisp's noise cancellation, you'll need to obtain their SDK and models through a Krisp developer account. Our Pipecat Krisp module simplifies the integration process, which we'll cover in this guide.

## Walkthrough

### 1. Get Access to Krisp SDK and Models

1. Create a Krisp account at [krisp.ai](https://krisp.ai/developers)
2. Download the [Krisp Desktop SDK](https://sdk.krisp.ai/sdk/desktop) that matches your platform:
   - Linux: `krisp-audio-sdk-9.0.0-lin_x64-nc`
   - macOS (ARM): `krisp-audio-sdk-9.0.0-mac_arm64-nc`
   - macOS (Intel): `krisp-audio-sdk-9.0.0-mac_x64-nc`
   - Windows: `krisp-audio-sdk-9.0.0-win_x64-nc`
3. Download the corresponding models. We recommend trying the Backgroud Voice Cancellation models.

### 2. Install build dependencies

The `pipecat-krisp` module is a python wrapper around Krisp's C++ SDK. To build the module, you'll need to install the following dependencies:

<Tabs>
  <Tab title="macOS">
    ```bash
    # Using Homebrew
    brew install cmake pybind11
    ```
  </Tab>
  <Tab title="Ubuntu/Debian">
    ```bash
    # Using apt
    sudo apt-get update
    sudo apt-get install cmake python3-dev pybind11-dev
    ```
  </Tab>
  <Tab title="Windows">
    ```powershell
    # Using Chocolatey
    choco install cmake
    # pybind11 will be installed via pip during the build process

    # OR using Visual Studio
    # 1. Install Visual Studio with C++ development tools
    # 2. Install CMake from https://cmake.org/download/
    # pybind11 will be installed via pip during the build process
    ```

  </Tab>
</Tabs>

<Note>
  For Windows users: Make sure you have Visual Studio installed with C++
  development tools, or alternatively, have the Visual C++ Build Tools
  installed.
</Note>

### 3. Clone and configure the pipecat-krisp repo

Clone the `pipecat-krisp` repository to your local machine:

<Tabs>
  <Tab title="SSH">
    
    ```bash
    git clone git@github.com:pipecat-ai/pipecat-krisp.git
    ```

  </Tab>
  <Tab title="HTTPS">
    
    ```bash
    git clone https://github.com/pipecat-ai/pipecat-krisp.git
    ```

  </Tab>
</Tabs>

Once cloned, navigate to directory of the cloned repo:

```bash
cd pipecat-krisp
```

Copy the provided `env_template` file to a new file named `.env`:

```bash
cp env_template .env
```

In `.env`, set the following paths to the downloaded Krisp SDK and model files:

```bash
KRISP_SDK_PATH=/path/to/krisp/sdk
KRISP_MODEL_PATH=/path/to/krisp/model
```

### 4. Build the pipecat-krisp Module

Follow these steps to set up and build the `pipecat-krisp` module:

Set up a python virtual environment:

<Tabs>
  <Tab title="macOS/Linux">
    ```bash
    python3 -m venv venv
    source venv/bin/activate
    ```
  </Tab>
  <Tab title="Windows">
    ```powershell
    # Using PowerShell
    python -m venv venv
    .\venv\Scripts\Activate.ps1

    # OR using Command Prompt
    python -m venv venv
    .\venv\Scripts\activate.bat

    # OR using Git Bash
    python -m venv venv
    source venv/Scripts/activate
    ```

  </Tab>
</Tabs>

Install dependencies:

```bash
pip install -r requirements.txt
```

Build and install the local python wrapper library:

```bash
pip install --editable .
```

### 5. Confirm the build

Once the build is complete, you can confirm the module is installed by running an example. To do that, first install the example's dependencies:

```bash
pip install -r example/requirements.txt
```

Next, run the example:

```bash
./scripts/run_example.sh
```

An output folder will be created, containing the processed file with noise suppression applied by Krisp.

#### Important for macOS users

If you're running on macOS you may receive a security warning about running the script. This is expected. You can allow access by going to `System Settings > Privacy & Security` then click `Allow Anyway` to permit the example to run.

<Frame>![Security & Privacy](/images/allow-krisp.png)</Frame>

After allowing and re-running, you may get a pop-up asking for permission. Select `Open Anyway` to run the script.

<Frame>![Open Anyway](/images/open-anyway-krisp.png)</Frame>

### 6. Install the pipecat-krisp module

Navigate your terminal (or switch windows) back to the pipecat repo. First, make sure your virtual environment is activated:

<Tabs>
  <Tab title="macOS/Linux">
    ```bash
    python3 -m venv venv
    source venv/bin/activate
    ```
  </Tab>
  <Tab title="Windows">
    ```powershell
    # Using PowerShell
    python -m venv venv
    .\venv\Scripts\Activate.ps1

    # OR using Command Prompt
    python -m venv venv
    .\venv\Scripts\activate.bat

    # OR using Git Bash
    python -m venv venv
    source venv/Scripts/activate
    ```

  </Tab>
</Tabs>

Export the path to your Krisp SDK and model files:

<Tabs>
  <Tab title="macOS/Linux">
    ```bash
    # Add to your .env file or shell configuration
    export KRISP_SDK_PATH=/PATH/TO/KRISP/SDK
    export KRISP_MODEL_PATH=/PATH/TO/KRISP/MODEL
    ```
  </Tab>
  <Tab title="Windows">
    ```powershell
    # Using PowerShell
    $env:KRISP_SDK_PATH = "C:\PATH\TO\KRISP\SDK"
    $env:KRISP_MODEL_PATH = "C:\PATH\TO\KRISP\MODEL"

    # OR using Command Prompt
    set KRISP_SDK_PATH=C:\PATH\TO\KRISP\SDK
    set KRISP_MODEL_PATH=C:\PATH\TO\KRISP\MODEL
    ```

  </Tab>
</Tabs>

<Tip>
  When selecting a `KRISP_MODEL_PATH`, ensure that you're selecting the actual
  model file, not just the directory. The path should look something like this:
  <Tabs>
    <Tab title="macOS/Linux">
      ```bash export
      KRISP_MODEL_PATH=./krisp/outbound-bvc-models-fp16/hs.c6.f.s.de56df.bucharest.kef
      ```
    </Tab>
    <Tab title="Windows">
      ```powershell
      $env:KRISP_MODEL_PATH="C:\krisp\outbound-bvc-models-fp16\hs.c6.f.s.de56df.bucharest.kef"
      ```
    </Tab>
  </Tabs>
</Tip>
Next, install the `pipecat-krisp` module:

```bash
pip install pipecat-ai[krisp]
```

### 7. Test the integration

You can now test the Krisp integration. The easiest way to do this is to run the foundational example: [07p-interruptible-krisp.py](https://github.com/pipecat-ai/pipecat/blob/main/examples/foundational/07p-interruptible-krisp.py).

<Tip>
You can run a foundational example by running the following command:

```bash
python examples/foundational/07p-interruptible-krisp.py -u YOUR_DAILY_ROOM_URL
```

</Tip>

## Publishing the pipecat-krisp Module

To use the `pipecat-krisp` module in your production builds, you need to publish it to PyPI. Here's how you can do that:

- From the root of the `pipecat-krisp` repo, run the `prepare_dist` script:

```bash
./scripts/prepare_dist.sh
```

- Upload to [TestPyPI](https://packaging.python.org/en/latest/guides/using-testpypi/) using twine:

```bash
twine upload --repository testpypi dist/*
```

- Test using `pip` to download packages from TestPyPI instead of PyPI

```bash
pip install --index-url https://test.pypi.org/simple/ pipecat-ai-krisp
```

- Once you confirm everything is working as expected, publish it to production:

```bash
twine upload dist/*
```

<Note>
  Use `twine upload dist/*` to upload your package and enter your credentials
  for the account you registered on the real PyPI. In this case, you donâ€™t need
  to specify `--repository`.
</Note>

## Usage Example

Here's a basic example of how to add Krisp noise reduction to your Pipecat pipeline:

```python
from pipecat.audio.filters.krisp_filter import KrispFilter
from pipecat.transports.services.daily import DailyParams, DailyTransport

# Add to transport configuration
transport = DailyTransport(
    room_url,
    token,
    "Audio Bot",
    DailyParams(
        audio_in_filter=KrispFilter(),  # Enable Krisp noise reduction
        audio_out_enabled=True,
        vad_enabled=True,
        vad_analyzer=SileroVADAnalyzer(),
        vad_audio_passthrough=True,
    ),
)
```

## Troubleshooting

Common issues and solutions:

1. **Missing Dependencies**

```bash
Error: Missing module: pipecat_ai_krisp
```

Solution: Ensure you've installed with the krisp extra: `pip install pipecat-ai[krisp]`

2. **Model Path Not Found**

```bash
Error: Model path for KrispAudioProcessor must be provided
```

Solution: Set the `KRISP_MODEL_PATH` environment variable or provide it in the constructor

3. **SDK Path Issues**

```bash
Error: Cannot find Krisp SDK
```

Solution: Verify `KRISP_SDK_PATH` points to a valid Krisp SDK installation

## Additional Resources

- [KrispFilter Reference Documentation](/api-reference/utilities/audio/krisp-filter)
- [Example Application](https://github.com/pipecat-ai/pipecat/blob/main/examples/foundational/07p-interruptible-krisp.py)
